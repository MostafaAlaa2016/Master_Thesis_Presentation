\begin{tikzpicture}


% The grid
% \draw[step=0.5, gray!40, very thin] (0,0) grid (8,4);

% LSTM frame
\def \yONE {0.5}
\def \yTWO {3.3}
\draw[rounded corners=10pt, very thick, fill=LightGreen]  (1.5, 0.5) rectangle (5, 2.3);

\def \sigmoidWidth  {0.45}
\def \sigmoidInDist {0.2}
\def \sigmoidHeight  {0.3}
\def \yB  {1.3}
\def \yD  {2}
\def \shift {0.3}

% Square tanh
\draw[fill=LightYellow]  (3,1.5-\sigmoidHeight/2) 
rectangle 
(3 +\sigmoidWidth+.2, 1.5-\sigmoidHeight/2 +\sigmoidHeight)
node[pos=0.5] {\scriptsize\textit{tanh}};

%tanh upper line
\draw[line width=1.8pt]  (3.2,1.65) -- (3.2, \yD);

% Second times operator and add operator
\def \xTimesB {2.6}
\def \yC      {1}

%line A upper left input from previous cell
%\draw[arrows=-latex,line width=1.8pt]  (1, \yD) -- (1.5, \yD);

%line A upper left input after cell
\draw[line width=1.8pt]  (1.5, \yD) -- (2.385, \yD);

\draw[arrows=-latex, line width=1.8pt] (2.367, \yD)  to[out=270, in=180] (3,1.5);

%line A upper from tanh to rictangle border
\draw[line width=1.8pt]  (3.17, \yD) -- (5, \yD);

%line A upper from rictangle border to next cell
\draw[arrows=-latex,line width=1.8pt]  (4.9, \yD) -- (5.7, \yD);


\def \levelB {1}
%level B line 
\draw[line width=1.8pt] (2.2, \levelB) 
--
(2.385, \levelB);

\def \xOfThirdSigmoid {\xSSS + \sigmoidWidth/2}
%second line last angle connected to sigmoid 

\draw[arrows=-latex, line width=1.8pt] (2.367,1) 
to[out=90, in=180] 
(3,1.5);


\def \bigR {0.3cm}
\def \bigRTWO {0.4cm}
\def \C    {1}
\def \xBigCicleONE {2}
\def \xBigCicleTWO {5.5 + 0.25}

\draw[thick,fill=LightBlue] (\xBigCicleONE, \yONE+.4 - \C) circle (\bigR) node {$x_{t}$};

% x_t line
\draw[line width=1.8pt] (\xBigCicleONE, \yONE -\C +0.7) 
--
(\xBigCicleONE, \yONE -\C +0.25 + 1.1);

\draw[line width=1.8pt] (\xBigCicleONE, \yONE -\C +0.25 + 1.1)
to[out=90, in=180]
(2.25, 1);



\draw[thick,fill=LightPurple] (\xBigCicleTWO-1, \yTWO -1.15 + \C) circle (\bigR) node {$h_{t}$};
%h_T lines
\draw[arrows=-latex, line width=1.8pt]
(\xBigCicleTWO-1, \yD )
--
(\xBigCicleTWO-1, \yTWO -1.4 + \C);


\end{tikzpicture}
